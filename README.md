# Czat Sportowy

**ğŸŒ [Live Application](https://czatsportowy.pl)** - Try it now!

Live sports discussion platform with real-time chat, AI-powered match analysis, and football data integration.

## Features

### Live Chat
- Real-time chat for ongoing matches (Socket.IO)
- Pre-match discussions for upcoming fixtures
- Private messaging between users
- Polish and English language support

### AI Match Analysis
- Detailed match analysis generated by GPT-4
- Team statistics, form, goal data
- Live analysis during ongoing matches
- Match predictions in double chance format
- Daily limits based on Redis (separate for IP and users)

### AI Report
- Automated generation of reports with analysis of upcoming matches
- Email delivery of reports to users
- Analysis of up to 15 upcoming matches
- Daily limits: 1 report per day for unauthenticated users (by IP), 1 for authenticated users (by user ID)
- Python service (FastAPI) running independently from the main application

### Football Data
- Live matches from API-Football with Redis caching
- Pagination (50 matches per page)
- Full-text search
- Interactive API-Sports widgets (scores, statistics, H2H)
- Team and league statistics
- Date picker for browsing matches

### Authentication
- JWT with access and refresh tokens
- Google OAuth login
- Password reset via email
- Protection against spam and abuse

## Tech Stack

**Frontend:**
- Next.js 15 (App Router)
- React 19
- Tailwind CSS
- Socket.IO Client
- next-intl (i18n)

**Backend:**
- Node.js + Express
- Socket.IO
- MongoDB + Mongoose
- Redis (caching and rate limiting)

**AI Agent (Python):**
- FastAPI
- OpenAI GPT-4
- Uvicorn

**External APIs:**
- OpenAI (analysis)
- API-Football (match data)
- API-Sports (widgets)

## Project Structure

```
czat-sportowy/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ [locale]/          # Internationalized routes
â”‚   â”‚   â””â”€â”€ pilka-nozna/   # Football pages
â”‚   â””â”€â”€ api/               # API Routes
â”œâ”€â”€ components/            # React components
â”œâ”€â”€ context/               # Context providers
â”œâ”€â”€ lib/                   # Utility libraries
â”œâ”€â”€ models/                # MongoDB schemas
â”œâ”€â”€ messages/              # Translations (pl.json, en.json)
â”œâ”€â”€ ai_agent/              # Python service for AI reports
â”‚   â”œâ”€â”€ fastapi_server.py  # FastAPI server
â”‚   â”œâ”€â”€ main.py            # Main agent logic
â”‚   â”œâ”€â”€ data_fetcher.py    # Data fetching
â”‚   â”œâ”€â”€ ai_analyzer.py     # AI analysis
â”‚   â”œâ”€â”€ email_sender.py    # Email sending
â”‚   â””â”€â”€ requirements.txt   # Python dependencies
â”œâ”€â”€ server.js              # Socket.IO server
â””â”€â”€ ecosystem.config.js    # PM2 configuration
```

## Requirements

- Node.js 18+
- MongoDB
- Redis
- Python 3.8+
- API keys: OpenAI, API-Football, API-Sports

## Deployment

The project uses GitHub Actions for automatic deployment to VPS. On push to `main` branch, the workflow automatically:
- Connects to server via SSH
- Pulls latest changes (`git pull`)
- Installs Node.js and Python dependencies
- Builds Next.js application
- Restarts PM2 processes

Workflow configuration in `.github/workflows/deploy.yml`.

## Security

- JWT authentication with refresh tokens
- Password hashing (bcrypt)
- Rate limiting via Redis
- Input validation and sanitization
- CORS and security headers
- SQL injection protection (Mongoose ODM)

## License

MIT
